# BookShelfs - Spring Boot Backend API

## üìñ –û –ø—Ä–æ–µ–∫—Ç–µ

BookShelfs ‚Äî —ç—Ç–æ backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (REST API) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—á–∏—Ç–∞—Ç–µ–ª–∏) –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∫–Ω–∏–∂–Ω—ã–µ –ø–æ–ª–∫–∏, –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–Ω–∏–≥–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏ –¥–µ–ª–∏—Ç—å—Å—è –∫–Ω–∏–≥–∞–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
–¢–∞–∫–∂–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Ç—ã–∫–∞—Ç—å—Å—è –≤ —à–∞–±–ª–æ–Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - –ø—Ä–æ–π—Ç–∏ –∫–∞–ø—á—É.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (JWT)
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á–∏—Ç–∞—Ç–µ–ª—è)**
*   **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–Ω–∏–∂–Ω—ã—Ö –ø–æ–ª–æ–∫**
*   **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º–∏ –∫–Ω–∏–≥–∞–º–∏**
*   **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è (–ø–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)**
*   **–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ - –æ–±–º–µ–Ω –∫–Ω–∏–≥ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
*   **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤**
*   **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å –ø–æ–º–æ—â—å—é Swagger/OpenAPI**

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **Java 17+**
*   **Spring Boot 3.x**
*   **Spring Security + JWT**
*   **Spring Mail**
*   **Spring Data JPA**
*   **Spring thymeleaf**
*   **Lombok**
*   **Mapstruct**
*   **Swagger/OpenAPI 3**
*   **Maven**


## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/ChipchiIinka/bookshelfs
    cd bookshelfs
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

    ```bash
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
    export SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/bookshelfs_db
    export SPRING_DATASOURCE_USERNAME=your_db_user
    export SPRING_DATASOURCE_PASSWORD=your_db_password

    # –ü–æ—á—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º (Yandex)
    export MAIL_USERNAME=your-email@yandex.ru
    export MAIL_PASSWORD=your-app-mail-password

    # JWT –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    export JWT_SECRET=your-super-secure-random-jwt-secret-key-here

    # hCaptcha –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    export RECAPTCHA_SECRET=your-hcaptcha-secret-key
    ```

3.  **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    ```bash
    # –ò—Å–ø–æ–ª—å–∑—É—è Maven Wrapper
    ./mvnw spring-boot:run

    # –ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ JAR –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
    ./mvnw clean package
    java -jar target/bookshelfs-0.0.1-SNAPSHOT.jar
    ```

4.  **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:** `http://127.0.0.1:8080`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
**http://127.0.0.1:8080/swagger-ui.html**

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —ç–Ω–¥-–ø–æ–∏–Ω—Ç—ã, –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.

–ï—Å—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
**http://127.0.0.1:8080/auth/login**
**http://127.0.0.1:8080/auth/register**

–î–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Å—Å—ã–ª–∫–µ –≤—ã—à–µ, –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å jwt —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ —É–∂–µ –≤ swagger

---

## üîê API Endpoints (–û–±–∑–æ—Ä)

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`AuthController`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è Auth |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –ù–µ—Ç |
| `GET` | `/api/auth/verify-email?token={token}` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email | –ù–µ—Ç |
| `POST` | `/api/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞) | –ù–µ—Ç |
| `POST` | `/api/auth/logout` | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã | –î–∞ (JWT) |

### 2. –ß–∏—Ç–∞—Ç–µ–ª–∏ (`ReaderController`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è Auth |
| :--- | :--- | :--- | :--- |
| `GET` | `/api/readers` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π | –î–∞ (JWT) |
| `GET` | `/api/readers/{readerId}/bookshelfs` | –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∏—Ç–∞—Ç–µ–ª—è | –î–∞ (JWT) |
| `PUT` | `/api/readers/{readerId}/bookshelfs` | –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—Ç–µ–ª—è | –î–∞ (JWT) |

### 3. –ö–Ω–∏–∂–Ω—ã–µ –ø–æ–ª–∫–∏ (`BookshelfController`)

*–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (`@CheckUserPermission`).*

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |–¢—Ä–µ–±—É–µ—Ç—Å—è Auth |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/readers/{readerId}/bookshelfs?bookshelfTitle={title}` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–ª–∫—É | –î–∞ (JWT) |
| `GET` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books` | –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–∫–∏ –∏ —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –Ω–∞ –Ω–µ–π | –î–∞ (JWT) |
| `PATCH`| `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books?bookshelfNewTitle={title}` | –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª–∫–∏ | –î–∞ (JWT) |
| `DELETE`| `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books` | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–∫—É | –î–∞ (JWT) |

### 4. –ö–Ω–∏–≥–∏ (`BookController`)

*Endpoints –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ (`@CheckUserPermission`).*

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è Auth |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É (multipart/form-data) | –î–∞ (JWT) |
| `GET` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}` | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ | –î–∞ (JWT) |
| `GET` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}/read` | –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É (–ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç) | –î–∞ (JWT) |
| `POST` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}/read?lastReadPage={page}` | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è | –î–∞ (JWT) |
| `PATCH`| `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}` | –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ) | –î–∞ (JWT) |
| `DELETE`| `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}` | –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É | –î–∞ (JWT) |

### 5. –û–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –∫–Ω–∏–≥–∞–º (`BookShareController`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è Auth |
| :--- | :--- | :--- | :--- |
| `POST` | `/api/readers/{readerId}/bookshelfs/{bookshelfId}/books/{bookId}/request` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–Ω–∏–≥–µ | –î–∞ (JWT) |
| `GET` | `/api/readers/{readerId}` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –î–∞ (JWT) |
| `POST` | `/api/readers/{readerId}/notifications/{notificationId}` | –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å (`status`, `rejectionReason`) | –î–∞ (JWT) |


